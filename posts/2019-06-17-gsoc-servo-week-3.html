<!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>georgeroman - GSoC with Servo - week 3</title>
        <link rel="stylesheet" href="../css/default.css" />
    </head>
    <body>
        <header>
            <div class="logo">
                <a href="../">George's blog</a>
            </div>
            <nav>
                <a href="../">Home</a>
                <a href="../about.html">About</a>
                <a href="../contact.html">Contact</a>
                <a href="../archive.html">Archive</a>
            </nav>
        </header>

        <main role="main">
            <h1>GSoC with Servo - week 3</h1>
            <article>
    <section class="header">
        Posted on June 17, 2019
        
            by George Roman
        
    </section>
    <section>
        <p>Last week the first big project milestone was achieved! The <code>wdspec</code> tests are now <a href="https://github.com/servo/servo/pull/23570">enabled</a> in Servo!</p>
<p>My first approach at this was to enable the tests one by one, together with small fixes in the associated commands’ implementation. At first, this went pretty well. I started by enabling <code>get_title</code>, <code>get_current_url</code> and all cookie related tests. However, enabling <code>find_element</code> and related tests raised some issues.</p>
<p>The test suites of commands related to finding elements contain lots of tests, a lot more than most of the other commands. Since they couldn’t complete in the <code>30</code> seconds default timeout threshold in <code>wptrunner</code>, the tests were ended prematurely and were wrongly reported as timed out. One solution I considered was passing a <code>--timeout-multiplier=4</code> argument to the test runner job in the CI server. With it, the timeout threshold would get a fourfold increase, from <code>30</code> seconds to two minutes. This, however, would have unnecessarily increased the testing time since the <code>wdspec</code> tests are ran together with the majority of the <code>wpt</code> tests and the increased timeout would have also been reflected in all these other tests.</p>
<p>As suggested <a href="https://github.com/servo/servo/pull/23550#issuecomment-501745411">here</a>, the best way to overcome this issue was by running a different job only for <code>wdspec</code> tests. This way, the increased timeout would only be reflected in the <code>wdspec</code> tests and the other tests would be run in the same way as before. Now, all <code>wdspec</code> tests needed to be enabled at once because the changes in <a href="https://github.com/servo/servo/blob/master/tests/wpt/include.ini"><code>include.ini</code></a>, the file where different test suites can be enabled or disabled, are only reflected when running the whole <code>wpt</code> test suite, not just a part of it as was the case with the <code>wdspec</code> tests.</p>
<p>Once the tests were enabled I started working on implementing some missing commands (<a href="https://w3c.github.io/webdriver/#switch-to-window"><code>SwitchToWindow</code></a> and <a href="https://w3c.github.io/webdriver/#dismiss-alert"><code>DismissAlert</code></a>) that were polluting the test runner output with <code>Command not implemented</code> errors.</p>
<p>During the weekend I worked on the <a href="https://w3c.github.io/webdriver/#get-page-source"><code>GetPageSource</code></a> command and today I finished implementing the <code>tag name</code> selector strategy for <code>FindElement</code> and related commands.</p>
<p>It was great week, very productive in terms of results! Now that the <code>wdspec</code> tests are enabled, the infrastructure for testing the current WebDriver implementation and for implementing the missing commands is all set up.</p>
<p>This week I’m going to continue working on implementing new WebDriver commands and on providing fixes where necessary in the existing implementation.</p>
    </section>
</article>

        </main>

        <footer>
            Site proudly generated by
            <a href="http://jaspervdj.be/hakyll">Hakyll</a>
        </footer>
    </body>
</html>
