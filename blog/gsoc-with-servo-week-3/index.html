<!doctype html> <html lang=en> <head> <meta charset=utf-8> <meta content="width=device-width,initial-scale=1" name=viewport> <base href=/ > <link href=global.css rel=stylesheet> <link href=favicon.png rel=icon type=image/png> <noscript id=sapper-head-start></noscript><title>GSoC with Servo - week 3</title><noscript id=sapper-head-end></noscript> </head> <body> <div id=sapper> <main> <div class=siimple-content--medium><div class="siimple--mx-4 siimple--my-4"><div class=siimple-h3>GSoC with Servo - week 3</div> <div> <p>Last week the first big project milestone was achieved! The <code>wdspec</code> tests are now <a href=https://github.com/servo/servo/pull/23570>enabled</a> in Servo!</p> <p>My first approach at this was to enable the tests one by one, together with small fixes in the associated commands' implementation. At first, this went pretty well. I started by enabling <code>get_title</code>, <code>get_current_url</code> and all cookie related tests. However, enabling <code>find_element</code> and related tests raised some issues.</p> <p>The test suites of commands related to finding elements contain lots of tests, a lot more than most of the other commands. Since they couldn't complete in the <code>30</code> seconds default timeout threshold in <code>wptrunner</code>, the tests were ended prematurely and were wrongly reported as timed out. One solution I considered was passing a <code>--timeout-multiplier=4</code> argument to the test runner job in the CI server. With it, the timeout threshold would get a fourfold increase, from <code>30</code> seconds to two minutes. This, however, would have unnecessarily increased the testing time since the <code>wdspec</code> tests are ran together with the majority of the <code>wpt</code> tests and the increased timeout would have also been reflected in all these other tests.</p> <p>As suggested <a href=https://github.com/servo/servo/pull/23550#issuecomment-501745411>here</a>, the best way to overcome this issue was by running a different job only for <code>wdspec</code> tests. This way, the increased timeout would only be reflected in the <code>wdspec</code> tests and the other tests would be run in the same way as before. Now, all <code>wdspec</code> tests needed to be enabled at once because the changes in <a href=https://github.com/servo/servo/blob/master/tests/wpt/include.ini><code>include.ini</code></a>, the file where different test suites can be enabled or disabled, are only reflected when running the whole <code>wpt</code> test suite, not just a part of it as was the case with the <code>wdspec</code> tests.</p> <p>Once the tests were enabled I started working on implementing some missing commands (<a href=https://w3c.github.io/webdriver/#switch-to-window><code>SwitchToWindow</code></a> and <a href=https://w3c.github.io/webdriver/#dismiss-alert><code>DismissAlert</code></a>) that were polluting the test runner output with <code>Command not implemented</code> errors.</p> <p>During the weekend I worked on the <a href=https://w3c.github.io/webdriver/#get-page-source><code>GetPageSource</code></a> command and today I finished implementing the <code>tag name</code> selector strategy for <code>FindElement</code> and related commands.</p> <p>It was great week, very productive in terms of results! Now that the <code>wdspec</code> tests are enabled, the infrastructure for testing the current WebDriver implementation and for implementing the missing commands is all set up.</p> <p>This week I'm going to continue working on implementing new WebDriver commands and on providing fixes where necessary in the existing implementation.</p> </div></div></div></main></div> <script>__SAPPER__={baseUrl:"",preloaded:[void 0,null,{post:{title:"GSoC with Servo - week 3",date:"2019-06-17T00:00:00.000Z",slug:"gsoc-with-servo-week-3",html:"\n\u003Cp\u003ELast week the first big project milestone was achieved! The \u003Ccode\u003Ewdspec\u003C\u002Fcode\u003E tests are now \u003Ca href=\"https:\u002F\u002Fgithub.com\u002Fservo\u002Fservo\u002Fpull\u002F23570\"\u003Eenabled\u003C\u002Fa\u003E in Servo!\u003C\u002Fp\u003E\n\u003Cp\u003EMy first approach at this was to enable the tests one by one, together with small fixes in the associated commands' implementation.\nAt first, this went pretty well. I started by enabling \u003Ccode\u003Eget_title\u003C\u002Fcode\u003E, \u003Ccode\u003Eget_current_url\u003C\u002Fcode\u003E and all cookie related tests.\nHowever, enabling \u003Ccode\u003Efind_element\u003C\u002Fcode\u003E and related tests raised some issues.\u003C\u002Fp\u003E\n\u003Cp\u003EThe test suites of commands related to finding elements contain lots of tests, a lot more than most of the other commands.\nSince they couldn't complete in the \u003Ccode\u003E30\u003C\u002Fcode\u003E seconds default timeout threshold in \u003Ccode\u003Ewptrunner\u003C\u002Fcode\u003E, the tests were ended prematurely and were wrongly reported as timed out.\nOne solution I considered was passing a \u003Ccode\u003E--timeout-multiplier=4\u003C\u002Fcode\u003E argument to the test runner job in the CI server.\nWith it, the timeout threshold would get a fourfold increase, from \u003Ccode\u003E30\u003C\u002Fcode\u003E seconds to two minutes.\nThis, however, would have unnecessarily increased the testing time since the \u003Ccode\u003Ewdspec\u003C\u002Fcode\u003E tests are ran together with the majority of the \u003Ccode\u003Ewpt\u003C\u002Fcode\u003E tests and\nthe increased timeout would have also been reflected in all these other tests.\u003C\u002Fp\u003E\n\u003Cp\u003EAs suggested \u003Ca href=\"https:\u002F\u002Fgithub.com\u002Fservo\u002Fservo\u002Fpull\u002F23550#issuecomment-501745411\"\u003Ehere\u003C\u002Fa\u003E, the best way to overcome this issue was by running a different job only for \u003Ccode\u003Ewdspec\u003C\u002Fcode\u003E tests.\nThis way, the increased timeout would only be reflected in the \u003Ccode\u003Ewdspec\u003C\u002Fcode\u003E tests and the other tests would be run in the same way as before.\nNow, all \u003Ccode\u003Ewdspec\u003C\u002Fcode\u003E tests needed to be enabled at once because the changes in \u003Ca href=\"https:\u002F\u002Fgithub.com\u002Fservo\u002Fservo\u002Fblob\u002Fmaster\u002Ftests\u002Fwpt\u002Finclude.ini\"\u003E\u003Ccode\u003Einclude.ini\u003C\u002Fcode\u003E\u003C\u002Fa\u003E,\nthe file where different test suites can be enabled or disabled, are only reflected when running the whole \u003Ccode\u003Ewpt\u003C\u002Fcode\u003E test suite, not just a part of it as was the case with the \u003Ccode\u003Ewdspec\u003C\u002Fcode\u003E tests.\u003C\u002Fp\u003E\n\u003Cp\u003EOnce the tests were enabled I started working on implementing some missing commands (\u003Ca href=\"https:\u002F\u002Fw3c.github.io\u002Fwebdriver\u002F#switch-to-window\"\u003E\u003Ccode\u003ESwitchToWindow\u003C\u002Fcode\u003E\u003C\u002Fa\u003E and\n\u003Ca href=\"https:\u002F\u002Fw3c.github.io\u002Fwebdriver\u002F#dismiss-alert\"\u003E\u003Ccode\u003EDismissAlert\u003C\u002Fcode\u003E\u003C\u002Fa\u003E) that were polluting the test runner output with \u003Ccode\u003ECommand not implemented\u003C\u002Fcode\u003E errors.\u003C\u002Fp\u003E\n\u003Cp\u003EDuring the weekend I worked on the \u003Ca href=\"https:\u002F\u002Fw3c.github.io\u002Fwebdriver\u002F#get-page-source\"\u003E\u003Ccode\u003EGetPageSource\u003C\u002Fcode\u003E\u003C\u002Fa\u003E command and today I finished implementing the \u003Ccode\u003Etag name\u003C\u002Fcode\u003E selector strategy\nfor \u003Ccode\u003EFindElement\u003C\u002Fcode\u003E and related commands.\u003C\u002Fp\u003E\n\u003Cp\u003EIt was great week, very productive in terms of results! Now that the \u003Ccode\u003Ewdspec\u003C\u002Fcode\u003E tests are enabled, the infrastructure for testing the current WebDriver implementation\nand for implementing the missing commands is all set up.\u003C\u002Fp\u003E\n\u003Cp\u003EThis week I'm going to continue working on implementing new WebDriver commands and on providing fixes where necessary in the existing implementation.\u003C\u002Fp\u003E\n"}}]};if('serviceWorker' in navigator)navigator.serviceWorker.register('/service-worker.js');(function(){try{eval("async function x(){}");var main="/client/client.e5726ad4.js"}catch(e){main="/client/legacy/client.326a6068.js"};var s=document.createElement("script");try{new Function("if(0)import('')")();s.src=main;s.type="module";s.crossOrigin="use-credentials";}catch(e){s.src="/client/shimport@1.0.1.js";s.setAttribute("data-main",main);}document.head.appendChild(s);}());</script> 